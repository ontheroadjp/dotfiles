<?php

/*
|--------------------------------------------------------------------------
| Application Routes
|--------------------------------------------------------------------------
|
| Here is where you can register all of the routes for an application.
| It's a breeze. Simply tell Laravel the URIs it should respond to
| and give it the controller to call when that URI is requested.
|
*/

Route::get('/', 'WelcomeController@index');
Route::get('home', 'HomeController@index');
Route::controllers([
	'auth' => 'Auth\AuthController',
	'password' => 'Auth\PasswordController',
]);

Route::resource('album', 'AlbumsController');
//Route::get('/{id}', 'AlbumController@
Route::post('image/search', 'SearchController@search');
Route::post('image/delete', 'ImageController@delete');

Route::get('test', function(){
	echo 'This is a test page.';
});

Route::get('fx', function() {
	//$data = file_get_contents('http://www.google.com/ig/calculator?hl=en&q=1USD=?JPY');
	$data = file_get_contents('http://www.freecurrencyconverterapi.com/api/v2/convert?q=USD_JPY&compact=y');
	$data = str_replace(array('lhs', 'rhs', 'error', 'icc'), array('"lhs"', '"rhs"', '"error"', '"icc"'), $data);

	$json = json_decode($data, true);
	$yen  = preg_replace("/[^0-9.]+/", '', $json['USD_JPY']);
	echo $yen['val'].'円/ドル'.'<br>';

	//var_dump($yen);
});
// http://mononofu.hatenablog.com/entry/20111213/1323742318


