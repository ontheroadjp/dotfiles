<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>新機能</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="migration72.html">« PHP 7.1.x から PHP 7.2.x への移行</a></li>
      <li style="float: right;"><a href="migration72.new-functions.html">新しい関数 »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="migration72.html">PHP 7.1.x から PHP 7.2.x への移行</a></li>
    <li>新機能</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="migration72.new-features" class="sect1">
 <h2 class="title">新機能</h2>

 <div class="sect2" id="migration72.new-features.object-type">
  <h3 class="title">object 型</h3>

  <p class="para">
   <span class="type"><a href="language.types.object.html" class="type object">object</a></span> 型が新たに導入されました。
   任意のオブジェクトに対する (反変) パラメータの型付けや (共変) 返り値の型付けで使えます。
   objects.
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">test</span><span style="color: #007700">(</span><span style="color: #0000BB">object&nbsp;$obj</span><span style="color: #007700">)&nbsp;:&nbsp;</span><span style="color: #0000BB">object<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;</span><span style="color: #0000BB">SplQueue</span><span style="color: #007700">();<br />}<br /><br /></span><span style="color: #0000BB">test</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">StdClass</span><span style="color: #007700">());</span>
</span>
</code></div>
   </div>

  </div>
 </div>

 <div class="sect2" id="migration72.new-features.ext-loading-by-name">
  <h3 class="title">名前指定による拡張モジュールのロード</h3>

  <p class="para">
   読み込む共有モジュールを指定する際に、拡張子
   (Unix なら <em>.so</em>、Windows なら <em>.dll</em> など)
   を指定する必要がなくなりました。php.ini ファイルでの指定だけでなく
   <span class="function"><a href="function.dl.html" class="function">dl()</a></span> 関数による指定でも同様です。
  </p>
 </div>

 <div class="sect2" id="migration72.new-features.abstract-method-overriding">
  <h3 class="title">抽象メソッドのオーバーライド</h3>

  <p class="para">
   ある抽象クラスが別の抽象クラスを継承しているときに、
   継承元クラスの抽象メソッドをオーバーライドできるようになりました。
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">abstract&nbsp;class&nbsp;</span><span style="color: #0000BB">A<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;abstract&nbsp;function&nbsp;</span><span style="color: #0000BB">test</span><span style="color: #007700">(</span><span style="color: #0000BB">string&nbsp;$s</span><span style="color: #007700">);<br />}<br />abstract&nbsp;class&nbsp;</span><span style="color: #0000BB">B&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">A<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;オーバーライドしましたが、パラメータの反変性や戻り値の共変性は維持しています。<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">abstract&nbsp;function&nbsp;</span><span style="color: #0000BB">test</span><span style="color: #007700">(</span><span style="color: #0000BB">$s</span><span style="color: #007700">)&nbsp;:&nbsp;</span><span style="color: #0000BB">int</span><span style="color: #007700">;<br />}</span>
</span>
</code></div>
   </div>

  </div>
 </div>

 <div class="sect2" id="migration72.new-features.sodium">
  <h3 class="title"><a href="book.sodium.html" class="link">Sodium</a> がコアモジュールに</h3>

  <p class="para">
   モダンな暗号ライブラリである Sodium が PHP コアモジュールに含まれるようになりました。
  </p>
  <p class="para">
   関数のリファレンスは <a href="book.sodium.html" class="link">Sodium</a> を参照ください。
  </p>
 </div>

 <div class="sect2" id="migration72.new-features.pws-hashing-with-argon2">
  <h3 class="title">Argon2 によるパスワードハッシュ</h3>

  <p class="para">
   <a href="book.password.html" class="link">パスワードハッシュ API</a>
   に Argon2 が追加されました。次の定数が公開されています。
  </p>

  <ul class="itemizedlist">
   <li class="listitem">
    <span class="simpara">
     <strong><code>PASSWORD_ARGON2I</code></strong>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <strong><code>PASSWORD_ARGON2_DEFAULT_MEMORY_COST</code></strong>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <strong><code>PASSWORD_ARGON2_DEFAULT_TIME_COST</code></strong>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <strong><code>PASSWORD_ARGON2_DEFAULT_THREADS</code></strong>
    </span>
   </li>
  </ul>
 </div>

 <div class="sect2" id="migration72.new-features.pdo-extended-str-types">
  <h3 class="title"><a href="book.pdo.html" class="link">PDO</a> の拡張文字列型</h3>

  <p class="para">
   PDO の文字列型が拡張され、
   プリペアをエミュレートする際に NCHAR 型をサポートするようになりました。
   以下の定数が追加されています。
  </p>

  <ul class="itemizedlist">
   <li class="listitem">
    <span class="simpara">
     <strong><code>PDO::PARAM_STR_NATL</code></strong>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <strong><code>PDO::PARAM_STR_CHAR</code></strong>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <strong><code>PDO::ATTR_DEFAULT_STR_PARAM</code></strong>
    </span>
   </li>
  </ul>

  <p class="para">
   これらの定数を使うには、
   <strong><code>PDO::PARAM_STR</code></strong> とビット <em>OR</em>
   で連結します。
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">quote</span><span style="color: #007700">(</span><span style="color: #DD0000">'über'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_STR&nbsp;</span><span style="color: #007700">|&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_STR_NATL</span><span style="color: #007700">);</span>
</span>
</code></div>
   </div>

  </div>
 </div>

 <div class="sect2" id="migration72.new-features.additional-emulated-prepares-debugging-info">
  <h3 class="title"><a href="book.pdo.html" class="link">PDO</a> のデバッグ情報にプリペアのエミュレートの内容を追加</h3>

  <p class="para">
   <span class="function"><a href="pdostatement.debugdumpparams.html" class="function">PDOStatement::debugDumpParams()</a></span> メソッドが改良されて、
   データベースに送信される SQL を表示できるようになりました。
   これは、プレースホルダの内容をバインド変数の値で置き換えた後の生のクエリです。
   この機能は、プリペア機能のエミュレートをデバッグしやすくするために用意されました
   (そのため、プリペア機能のエミュレートが有効になっているときしか使えません)。
  </p>
 </div>

 <div class="sect2" id="migration72.new-features.extended-ops-in-ldap">
  <h3 class="title"><a href="book.ldap.html" class="link">LDAP</a> における拡張オペレーションのサポート</h3>

  <p class="para">
   LDAP 拡張モジュールが EXOP をサポートするようになりました。
   以下の関数や定数が追加されています。
  </p>

  <ul class="itemizedlist">
   <li class="listitem">
    <span class="simpara">
     <span class="function"><a href="function.ldap-parse-exop.html" class="function">ldap_parse_exop()</a></span>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <span class="function"><a href="function.ldap-exop.html" class="function">ldap_exop()</a></span>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <span class="function"><a href="function.ldap-exop-passwd.html" class="function">ldap_exop_passwd()</a></span>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <span class="function"><a href="function.ldap-exop-whoami.html" class="function">ldap_exop_whoami()</a></span>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <strong><code>LDAP_EXOP_START_TLS</code></strong>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <strong><code>LDAP_EXOP_MODIFY_PASSWD</code></strong>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <strong><code>LDAP_EXOP_REFRESH</code></strong>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <strong><code>LDAP_EXOP_WHO_AM_I</code></strong>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <strong><code>LDAP_EXOP_TURN</code></strong>
    </span>
   </li>
  </ul>
 </div>

 <div class="sect2" id="migration72.new-features.addr-info-in-sockets">
  <h3 class="title"><a href="book.sockets.html" class="link">ソケット</a> 拡張モジュールでのアドレス情報の対応</h3>

  <p class="para">
   ソケット拡張モジュールが、アドレス情報のルックアップや
   接続、バインド、explainに対応するようになりました。
   新しく追加されたのは、以下の四つの関数です。
  </p>

  <ul class="itemizedlist">
   <li class="listitem">
    <span class="simpara">
     <span class="function"><a href="function.socket-addrinfo-lookup.html" class="function">socket_addrinfo_lookup()</a></span>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <span class="function"><a href="function.socket-addrinfo-connect.html" class="function">socket_addrinfo_connect()</a></span>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <span class="function"><a href="function.socket-addrinfo-bind.html" class="function">socket_addrinfo_bind()</a></span>
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <span class="function"><a href="function.socket-addrinfo-explain.html" class="function">socket_addrinfo_explain()</a></span>
    </span>
   </li>
  </ul>
 </div>

 <div class="sect2" id="migration72.new-features.param-type-widening">
  <h3 class="title">パラメータの型の拡大変換</h3>

  <p class="para">
   メソッドをオーバーライドしたりインターフェイスを実装したりする際に、
   元のパラメータの型指定を省略できるようになりました。
   それでもリスコフの置換原則には違反していません。
   パラメータの型は反変だからです。
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">interface&nbsp;</span><span style="color: #0000BB">A<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">Test</span><span style="color: #007700">(array&nbsp;</span><span style="color: #0000BB">$input</span><span style="color: #007700">);<br />}<br /><br />class&nbsp;</span><span style="color: #0000BB">B&nbsp;</span><span style="color: #007700">implements&nbsp;</span><span style="color: #0000BB">A<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">Test</span><span style="color: #007700">(</span><span style="color: #0000BB">$input</span><span style="color: #007700">){}&nbsp;</span><span style="color: #FF8000">//&nbsp;$input&nbsp;の型指定を省略<br /></span><span style="color: #007700">}</span>
</span>
</code></div>
   </div>

  </div>
 </div>

 <div class="sect2" id="migration72.new-features.trailing-comma-in-grouped-namespaces">
  <h3 class="title">名前空間のグループ指定における最後のカンマの許可</h3>

  <p class="para">
   PHP 7.0 で導入されたグループ指定構文で、最後にカンマを付けられるようになりました。
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">use&nbsp;</span><span style="color: #0000BB">Foo</span><span style="color: #007700">\</span><span style="color: #0000BB">Bar</span><span style="color: #007700">\{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">Foo</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">Bar</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">Baz</span><span style="color: #007700">,<br />};</span>
</span>
</code></div>
   </div>

  </div>
 </div>

 <div class="sect2" id="migration72.new-features.proc_nice-windows-support">
  <h3 class="title">Windows での <span class="function"><a href="function.proc-nice.html" class="function">proc_nice()</a></span> のサポート</h3>

  <p class="para">
   <span class="function"><a href="function.proc-nice.html" class="function">proc_nice()</a></span> 関数が Windows でも使えるようになりました。
  </p>
 </div>

 <div class="sect2" id="migration72.new-features.pack-unpack-endian-support">
  <h3 class="title"><span class="function"><a href="function.pack.html" class="function">pack()</a></span> と <span class="function"><a href="function.unpack.html" class="function">unpack()</a></span> でのエンディアンのサポート</h3>

  <p class="para">
   <span class="function"><a href="function.pack.html" class="function">pack()</a></span> と <span class="function"><a href="function.unpack.html" class="function">unpack()</a></span> が、
   リトルエンディアンとビッグエンディアンの両方の float や double に対応するようになりました。
  </p>
 </div>

 <div class="sect2" id="migration72.new-features.exif-features">
  <h3 class="title"><a href="book.exif.html" class="link">EXIF</a> 拡張モジュールの機能追加</h3>

  <p class="para">
   EXIF 拡張モジュールがより多くのフォーマットに対応するようになりました。
   <span class="function"><a href="function.exif-read-data.html" class="function">exif_read_data()</a></span> 関数で画像をパースするときに、
   今までよりも多くの独自タグが適切に変換されるようになります。
   新たにサポートするようになったフォーマットは以下のとおりです。
  </p>

  <ul class="itemizedlist">
   <li class="listitem">
    <span class="simpara">
     Samsung
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     DJI
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     Panasonic
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     Sony
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     Pentax
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     Minolta
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     Sigma/Foveon
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     AGFA
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     Kyocera
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     Ricoh
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     Epson
    </span>
   </li>
  </ul>

  <p class="para">
   また、<span class="function"><a href="function.exif-read-data.html" class="function">exif_read_data()</a></span> と <span class="function"><a href="function.exif-thumbnail.html" class="function">exif_thumbnail()</a></span>
   の第一引数にストリームを渡せるようになりました。
  </p>
 </div>

 <div class="sect2" id="migration72.new-features.pcre">
  <h3 class="title"><a href="book.pcre.html" class="link">PCRE</a> の新機能</h3>

  <ul class="itemizedlist">
   <li class="listitem">
    <span class="simpara">
     <em>J</em> 修飾子で PCRE_DUPNAMES を設定できるようになりました。
    </span>
   </li>
  </ul>
 </div>

 <div class="sect2" id="migration72.new-features.sqlite3">
  <h3 class="title"><a href="book.sqlite3.html" class="link">SQLite3</a> での BLOB の書き込み</h3>

  <p class="para">
   <span class="methodname"><a href="sqlite3.openblob.html" class="methodname">SQLite3::openBlob()</a></span> が、BLOB
   フィールドを書き込みモードでオープンできるようになりました。
   これまでは読み込みモードにしか対応していませんでした。
  </p>
 </div>

 <div class="sect2" id="migration72.new-features.oci8">
  <h3 class="title"><a href="book.oci8.html" class="link">Oracle OCI8</a> Transparent Application Failover コールバック</h3>

  <p class="para">
   <a href="oci8.taf.html" class="link">Oracle Database Transparent Application Failover (TAF) コールバック</a>
   のサポートが追加されました。
   TAF を使うと、データベースとの接続が切れたときに、
   提議済みのデータベースに自動的に再接続できます。
   TAF コールバックを使うと、
   フェイルオーバー時の再接続を PHP アプリケーションから監視したり制御したりできるようになります。
  </p>
 </div>

 <div class="sect2" id="migration72.new-features.zip">
  <h3 class="title"><a href="book.oci8.html" class="link">ZIP</a> 拡張モジュールの機能追加</h3>

  <p class="para">
   暗号化されたアーカイブの読み書きができるようになりました
   (libzip 1.2.0 以降が必要です)。
  </p>
  <p class="para">
   <a href="class.ziparchive.html" class="classname">ZipArchive</a> クラスが <span class="interfacename"><a href="class.countable.html" class="interfacename">Countable</a></span>
   インターフェイスを実装するようになりました。
  </p>
  <p class="para">
   <em>zip://</em> ストリームのコンテキストオプションに
   <em>&#039;password&#039;</em> を使えるようになりました。
  </p>
 </div>

</div></div></div></body></html>